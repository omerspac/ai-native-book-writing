"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[3506],{7897:(e,s,r)=>{r.r(s),r.d(s,{default:()=>t});var a=r(6540),i=r(9150),c=r(5475),l=r(6347),n=r(4586),o=r(4848);const t=function(){const{user:e,loading:s}=(0,c.A)(),[r,t]=(0,a.useState)(null),[d,h]=(0,a.useState)(null),{siteConfig:m}=(0,n.A)(),j=m.customFields.backendUrl;return(0,a.useEffect)(()=>{(async()=>{if(e&&!s){const e=localStorage.getItem("access_token");if(!e)return void h("No access token found.");try{const s=await fetch(`${j}/api/v1/users/me`,{headers:{Authorization:`Bearer ${e}`}});if(!s.ok){const e=await s.json();throw new Error(e.detail||"Failed to fetch user data")}const r=await s.json();t(r)}catch(r){h(r.message),console.error("Error fetching user data:",r)}}})()},[e,s,j]),s?(0,o.jsx)(i.A,{children:(0,o.jsx)("p",{children:"Loading user data..."})}):e?(0,o.jsxs)(i.A,{title:"Profile",description:"User Profile Page",children:[(0,o.jsx)("header",{className:"hero hero--primary",style:{backgroundColor:"var(--ifm-color-primary-darkest)"},children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("h1",{className:"hero__title",children:"User Profile"}),(0,o.jsxs)("p",{className:"hero__subtitle",children:["Welcome, ",e.email,"!"]})]})}),(0,o.jsx)("main",{children:(0,o.jsx)("section",{className:"container margin-vert--xl",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col col--6 col--offset-3",children:(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"card__header",children:(0,o.jsx)("h3",{children:"Your Information"})}),(0,o.jsxs)("div",{className:"card__body",children:[d&&(0,o.jsx)("div",{className:"alert alert--danger",children:d}),r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"ID:"})," ",r.id]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Email:"})," ",r.email]})]}):(0,o.jsx)("p",{children:"Fetching profile details..."})]})]})})})})})]}):(0,o.jsx)(l.rd,{to:"/login"})}}}]);