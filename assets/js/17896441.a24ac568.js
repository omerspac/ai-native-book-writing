"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[8401],{2691:(t,a,n)=>{n.r(a),n.d(a,{default:()=>u});var e=n(6540),s=n(8310),o=n(6666),r=n(4586),l=n(4164),i=n(7941),c=n(3092),d=n(4848);function u(t){const{language:a,setLanguage:n}=(0,o.o)(),{siteConfig:u}=(0,r.A)(),h=u.customFields.backendUrl,[m,b]=(0,e.useState)(""),[g,f]=(0,e.useState)(""),[w,p]=(0,e.useState)("original"),[y,j]=(0,e.useState)(!1),[k,x]=(0,e.useState)({raw:!0,translation:!1}),[T,S]=(0,e.useState)(null),{content:v}=t,$=v.metadata.source;(0,e.useEffect)(()=>{(async()=>{x(t=>({...t,raw:!0}));try{const t=$.replace(/^@site/,""),a=`${u.baseUrl.replace(/\/$/,"")}${t}`,n=await fetch(a);if(!n.ok)throw new Error(`Failed to fetch raw content: ${n.statusText}`);const e=await n.text();b(e)}catch(t){S(`Could not load chapter content: ${t.message}`)}finally{x(t=>({...t,raw:!1}))}})()},[$,u.baseUrl]),(0,e.useEffect)(()=>{"ur"===a?(C(),j(!0)):(j(!1),f(""))},[a,m]);const C=async()=>{const t=m;if(t){x(t=>({...t,translation:!0})),S(null);try{const a=await fetch(`${h}/api/v1/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})});if(!a.ok)throw new Error((await a.json()).detail||"Translation failed");const n=await a.json();f(n.translated_content)}catch(a){S(`Translation failed: ${a.message}`),alert(`Translation failed: ${a.message}`)}finally{x(t=>({...t,translation:!1}))}}};let N=null;return N=y?(0,d.jsx)(i.oz,{remarkPlugins:[c.A],children:g}):(0,d.jsx)(s.A,{...t}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"margin-bottom--md button-group",children:[y&&(0,d.jsx)("button",{className:"button button--secondary button--sm",onClick:()=>{p("original"),n("en")},disabled:k.translation,children:"Show Original"}),!y&&"en"===a&&(0,d.jsx)("button",{className:"button button--primary button--sm",onClick:()=>n("ur"),disabled:k.translation||k.raw,children:k.translation?"Translating...":"Translate to Urdu"})]}),T&&(0,d.jsx)("div",{className:"alert alert--danger margin-top--sm",children:T}),(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)("div",{className:(0,l.A)("markdown",y&&"rtl-content"),children:k.raw||y&&k.translation?(0,d.jsx)("div",{children:"Loading content..."}):N})})]})}}}]);