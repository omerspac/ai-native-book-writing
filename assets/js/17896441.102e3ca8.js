"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[8401],{2691:(t,a,e)=>{e.r(a),e.d(a,{default:()=>u});var n=e(6540),s=e(8310),r=e(6666),l=e(4586),i=e(4164),o=e(7941),c=e(3092),d=e(4848);function u(t){const{language:a,setLanguage:e}=(0,r.o)(),{siteConfig:u}=(0,l.A)(),f=u.customFields.backendUrl,[h,w]=(0,n.useState)(""),[g,m]=(0,n.useState)(""),[y,k]=(0,n.useState)("original"),[p,b]=(0,n.useState)(!1),[j,x]=(0,n.useState)({raw:!0,translation:!1}),[S,T]=(0,n.useState)(null),{content:v}=t,$=v.metadata.source;(0,n.useEffect)(()=>{(async()=>{x(t=>({...t,raw:!0}));try{const t=$.replace(/^@site/,""),a=`${u.baseUrl.replace(/\/$/,"")}${t}`,e=await fetch(a);if(!e.ok)throw new Error(`Failed to fetch raw content: ${e.statusText}`);const n=await e.text();w(n)}finally{x(t=>({...t,raw:!1}))}})()},[$,u.baseUrl]),(0,n.useEffect)(()=>{"ur"===a?(A(),b(!0)):(b(!1),m(""))},[a,h]);const A=async()=>{const t=h;if(t){x(t=>({...t,translation:!0})),T(null);try{const a=await fetch(`${f}/api/v1/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})});if(!a.ok)throw new Error((await a.json()).detail||"Translation failed");const e=await a.json();m(e.translated_content)}catch(a){T(`Translation failed: ${a.message}`),alert(`Translation failed: ${a.message}`)}finally{x(t=>({...t,translation:!1}))}}};let C=null;return C=p?(0,d.jsx)(o.oz,{remarkPlugins:[c.A],children:g}):(0,d.jsx)(s.A,{...t}),(0,d.jsxs)(d.Fragment,{children:[S&&(0,d.jsx)("div",{className:"alert alert--danger margin-top--sm",children:S}),(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)("div",{className:(0,i.A)("markdown",p&&"rtl-content"),children:j.raw||p&&j.translation?(0,d.jsx)("div",{children:"Loading content..."}):C})})]})}}}]);